<!doctype html>
<html>
	<!-- InstanceBegin template="/Templates/template.dwt" codeOutsideHTMLIsLocked="false" -->

	<head>
		<meta charset="utf-8">
		<!-- InstanceBeginEditable name="doctitle" -->
		<title>admin</title>
		<!-- InstanceEndEditable -->
		<link href="static/css/comm.css" rel="stylesheet" type="text/css" />
		<link href="static/css/template.css" rel="stylesheet" type="text/css" />
		<script src="lib/jquery/1.9.1/jquery.min.js" type="text/javascript"></script>
		<!--<script src="lib/layer/2.4/layer.js" type="text/javascript"></script>-->
		<!--上面是模板页内容不可动-->
		<!-- InstanceBeginEditable name="head" -->
		<link href="lib/layui/css/layui.css" rel="stylesheet" type="text/css">
		<link href="static/css/specialSubgroup.css" rel="stylesheet" type="text/css">
		<!-- InstanceEndEditable -->
		<!--下面是模板页内容不可动-->
	</head>

	<body>
		<div class="header">
			<a class="logo" href="javascript:"><img src="static/images/logo.png" alt="" /></a>
			<div class="nav">
				<a href="javascript:">首页<i></i></a>
				<a href="javascript:" class="light">专项管理<i></i></a>
				<a href="javascript:">项目管理<i></i></a>
				<a href="javascript:">成果管理<i></i></a>
				<a href="javascript:">数据服务<i></i></a>
				<a href="javascript:">系统设置<i></i></a>
			</div>
			<div class="user">
				<p>
					<img src="static/images/head.png" alt="">
					<span>孟小玲 XX部门</span>
				</p>
				<div>
					<a href="javascript:"><img src="static/images/user.png" alt="" />个人设置</a>
					<a href="javascript:"><img src="static/images/help.png" alt="" />帮助</a>
					<a href="javascript:"><img src="static/images/quit.png" alt="" />退出</a>
				</div>
			</div>
		</div>
		<div class="main">
			<div class="leftMenu">
				<h5>专项名称专项名称...</h5>
				<div class="light">
					<h3><img src="static/images/leftMenuIconPre1.png" alt="" />预申报<i>16</i></h3>
					<ul>
						<li>形式审查</li>
						<li class="hover">预申报评审</li>
					</ul>
				</div>
				<div>
					<h3><img src="static/images/leftMenuIconPre2.png" alt="" />正式申报<i>20</i></h3>
					<ul>
						<li>专项信息</li>
						<li>专项指南</li>
						<li>专项流程</li>
						<li>专项项目</li>
					</ul>
				</div>
				<div>
					<h3><img src="static/images/leftMenuIconPre3.png" alt="" />项目立项<i>5</i></h3>
					<ul>
						<li>专项信息</li>
						<li>专项指南</li>
						<li>专项流程</li>
						<li>专项项目</li>
					</ul>
				</div>
				<div>
					<h3><img src="static/images/leftMenuIconPre4.png" alt="" />过程管理<i>5</i></h3>
					<ul>
						<li>专项信息</li>
						<li>专项指南</li>
						<li>专项流程</li>
						<li>专项项目</li>
					</ul>
				</div>
				<div>
					<h3><img src="static/images/leftMenuIconPre5.png" alt="" />项目验收<i>5</i></h3>
					<ul>
						<li>专项信息</li>
						<li>专项指南</li>
						<li>专项流程</li>
						<li>专项项目</li>
					</ul>
				</div>

			</div>
			<div class="region">
				<!--上面是模板页内容不可动-->
				<!-- InstanceBeginEditable name="home" -->
				<div class="switch">
					<a href="preDeclaration.html">预申报评审</a>
					<a href="preSpecial.html">XXXXX专项</a>
					<a class="light" href="specialSubgroup.html">XXXXX专项-项目分组</a>
				</div>
				<div class="wrapup">
					<form action="" method="post">
						<div class="inputbox">
							<div>
								<span>指南方向</span>
								<div class="select">
									<select>
										<option>指南方向</option>
										<option>指南方向</option>
										<option>指南方向</option>
									</select>
								</div>
							</div>
							<div>
								<span>项目名称</span>
								<input type="text" value="" />
							</div>
							<input class="query" type="submit" value="" />
							<input class="reset" type="reset" value="" />
						</div>
					</form>
					<div id="main—box">
						<div class="left">
							<h4>请在项目列表中勾选所需要的项目</h4>
							<div class="list">
								<table border="1" cellspacing="" cellpadding="">
									<tr class="header">
										<th>序号</th>
										<th>项目编号</th>
										<th>项目名称</th>
									</tr>
								</table>
								<div id="leftPage">

								</div>
							</div>
						</div>
						<div class="middle">
							<ul>
								<li class="lfrtAll">>></li>
								<li class="lfrt">></li>
								<li class="rtlf">
									<</li>
										<li class="rtlfAll">
											<<</li>
							</ul>
						</div>
						<div class="right">
							<h4>已选项目列表</h4>
							<div class="list">
								<table border="1" cellspacing="" cellpadding="">
									<tr class="header">
										<th>序号</th>
										<th>指南方向<i><img src="static/images/iconSx.png"/></i></th>
										<th>项目编号<i><img src="static/images/iconJx.png"/></i></th>
										<th>项目名称</th>
										<th>承租单位</th>
										<th>项目负责人</th>
									</tr>
								</table>
								<div id="rightPage">

								</div>
							</div>
						</div>
					</div>
					<div class="info">操作人：<span>张三</span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;操作时间：<span>2018/2/1 11：00</span></div>
					<!--<div id="paging"></div>-->
					<div class="save">
						<div class="title">
							<b>保存</b>
							<b onclick="layer.close(Daochu) ">取消</b>
						</div>
					</div>
				</div>

				<div class="cueLayer" id="Dellayer">
					<h3><span>删除评审任务</span><b  onclick="layer.close(Dellayer) "></b></h3>
					<div>
						<img src="static/images/delTitleIcon.png" alt="" />
						<p>是否删除评审任务及其评审分组？</p>
					</div>
					<div class="title">
						<b>确认</b>
						<b onclick="layer.close(Dellayer) ">取消</b>
					</div>
				</div>

				<div class="cueLayer" id="Newps">
					<h3><span>新建评审任务</span><b onclick="layer.close(Newps) "></b></h3>
					<div>
						<ul>
							<li>
								<span>申报年度</span>
								<div class="select">
									<select>
										<option>2018</option>
										<option>2018</option>
										<option>2018</option>
									</select>
								</div>
							</li>
							<li>
								<span>评审阶段</span>
								<div class="select">
									<select>
										<option>评审阶段</option>
										<option>评审阶段</option>
										<option>评审阶段</option>
									</select>
								</div>
							</li>
							<li class="name">
								<span>任务名称</span>
								<input type="text" name="" id="" value="" />
								<p>* 一次评审工作请务必创建一个评审任务，不要创建多个评审任务</p>
							</li>
							<li>
								<span>任务类型</span>
								<div class="select">
									<select>
										<option>评审</option>
										<option>评审</option>
										<option>评审</option>
									</select>
								</div>
							</li>
							<li>
								<span>评审形式</span>
								<div class="select">
									<select>
										<option>会议</option>
										<option>会议</option>
										<option>会议</option>
									</select>
								</div>
							</li>
							<li>
								<span>开始日期</span>
								<input type="text" name="" id="" value="2018-08-08" />
							</li>
							<li>
								<span>结束日期</span>
								<input type="text" name="" id="" value="2018-08-08" />
							</li>
							<li>
								<span>组织单位</span>
								<div class="select">
									<select>
										<option>单位</option>
										<option>单位</option>
										<option>单位</option>
									</select>
								</div>
							</li>
							<li>
								<span>相关处室</span>
								<div class="select">
									<select>
										<option>处室1</option>
										<option>处室1</option>
										<option>处室1</option>
									</select>
								</div>
							</li>
							<li>
								<span>创建人</span>
								<input type="text" name="" id="" value="" />
							</li>
							<li>
								<span>创建日期</span>
								<input type="text" name="" id="" value="2018-08-03" />
							</li>
							<li class="check-box">
								<input type="checkbox" /> 是否创建评审分组
							</li>
							<li class="num">
								<span>评审分租数</span>
								<div class="select">
									<select>
										<option>2</option>
										<option>2</option>
										<option>2</option>
									</select>
								</div>
							</li>
						</ul>
					</div>
					<div class="title">
						<b>保存</b>
						<b onclick="layer.close(Newps) ">取消</b>
					</div>
				</div>

				<div class="cueLayer fenzujump" id="fenzujump">
					<h3><span>任务分组授权</span><b onclick="layer.close(fenzujump) "></b></h3>
					<div>
						<ul>
							<li class="renwuName">
								<span>任务名称</span>
								<input type="text" name="" id="" value="XXXXXXXX" readonly="readonly" />
							</li>
							<li>
								<span>选择授权人处室</span>
								<div class="select">
									<select>
										<option>选择授权人处室</option>
										<option>选择授权人处室</option>
										<option>选择授权人处室</option>
									</select>
								</div>
							</li>
							<li>
								<span>评审分组</span>
								<div class="select">
									<select>
										<option>评审一组</option>
										<option>评审分组</option>
										<option>评审分组</option>
									</select>
								</div>
							</li>
							<li>
								<span>选择授权人姓名</span>
								<div class="select">
									<select>
										<option>评审</option>
										<option>评审</option>
										<option>评审</option>
									</select>
								</div>
							</li>
							<li class="a">
								<span>添加</span>
							</li>
						</ul>
						<div class="hr">
							<p>
								<span>评审分组列表</span> <i></i>
							</p>
							<table class="projectlist" border="1">
								<tbody>
									<tr>
										<th>序号 </th>
										<th>评审分组</th>
										<th>负责人</th>
										<th>处室</th>
										<th>状态</th>
									</tr>
									<tr>
										<td>1</td>
										<td>评审一组</td>
										<td>高峰</td>
										<td>处室一</td>
										<td><em class="yes">已确认</em></td>
									</tr>
									<tr>
										<td>1</td>
										<td>评审一组</td>
										<td>高峰</td>
										<td>处室一</td>
										<td><em class="not">未确认</em></td>
									</tr>
								</tbody>
							</table>
						</div>
					</div>
					<div class="title">
						<b>保存</b>
						<b onclick="layer.close(fenzujump) ">取消</b>
					</div>
				</div>
				<div class="cueLayer fenzujump renwujump" id="renwujump">
					<h3><span>评审任务确认</span><b onclick="layer.close(renwujump) "></b></h3>
					<div>
						<p class="list">
							任务名称：<span>XXXXX</span>
						</p>
						<p class="list">
							开始日期：<span>2018-01-01</span> 结束日期：<span>2018-01-01</span> 任务类型：<span>评审</span>
						</p>
						<p class="list">
							评审形式：<span>网络</span> 组织单位：<span>单位一</span>
						</p>
						<ul>
							<li>
								<span>确认日期：</span>
								<input type="text" name="" id="" value="" />
							</li>
							<li class="two">
								<span>确认人：</span>
								<input type="text" name="" id="" value="" />
							</li>
							<li class="final">
								<span>任务状态：</span>
								<div class="select">
									<select>
										<option>已确认</option>
										<option>已确认</option>
										<option>已确认</option>
									</select>
								</div>
							</li>
						</ul>
						<div class="hr">
							<p>
								<span>评审分组列表</span> <i></i>
							</p>
							<table class="projectlist" border="1">
								<tbody>
									<tr>
										<th>序号</th>
										<th>评审分组</th>
										<th>已选项目</th>
										<th>已选专家</th>
										<th>负责人</th>
										<th>处室</th>
										<th>状态</th>
									</tr>
									<tr>
										<td>1</td>
										<td>评审一组</td>
										<td>2</td>
										<td>2</td>
										<td>高峰</td>
										<td>处室一</td>
										<td><em class="yes">已确认</em></td>
									</tr>
									<tr>
										<td>2</td>
										<td>评审二组</td>
										<td>1</td>
										<td>1</td>
										<td>马云</td>
										<td>处室二</td>
										<td><em class="not">未确认</em></td>
									</tr>
								</tbody>
							</table>
						</div>
					</div>
					<div class="title">
						<b>保存</b>
						<b onclick="layer.close(renwujump) ">取消</b>
					</div>
				</div>
				<div class="cueLayer Daochu" id="Daochu">
					<h3><span>导出专家名单</span><b  onclick="layer.close(Daochu) "></b></h3>
					<div>
						<p>请选择需要导出的专家名单字段</p>
						<ul>
							<li>
								<input type="checkbox" name="" id="" value="" /> 专家姓名
							</li>
							<li>
								<input type="checkbox" name="" id="" value="" /> 单位
							</li>
							<li>
								<input type="checkbox" name="" id="" value="" /> 职称
							</li>
							<li>
								<input type="checkbox" name="" id="" value="" /> 职务
							</li>
							<li>
								<input type="checkbox" name="" id="" value="" /> 评审分组
							</li>
							<li>
								<input type="checkbox" name="" id="" value="" /> 评审任务
							</li>
							<li>
								<input type="checkbox" name="" id="" value="" /> e_mail
							</li>
						</ul>
					</div>
					<div class="title">
						<b>保存</b>
						<b onclick="layer.close(Daochu) ">取消</b>
					</div>
				</div>
				<div class="cueLayer fenzujump renwujump renwufenzujump" id="renwufenzujump">
					<div>
						<h4>任务分组情况</h4>
						<p class="list">
							任务名称：<span>XXXXX</span>
						</p>
						<p class="list">
							开始日期：<span>2018-01-01</span> 结束日期：<span>2018-01-01</span> 任务类型：<span>评审</span>
						</p>
						<p class="list">
							评审形式：<span>网络</span> 组织单位：<span>单位一</span>
						</p>
						<div class="hr">
							<p>
								<span>评审分组列表</span> <i></i>
							</p>
							<table class="projectlist" border="1">
								<tbody>
									<tr>
										<th>序号</th>
										<th>评审分组</th>
										<th>已选项目</th>
										<th>已选专家</th>
										<th>负责人</th>
										<th>处室</th>
										<th>状态</th>
									</tr>
									<tr>
										<td>1</td>
										<td>评审一组</td>
										<td>2</td>
										<td>2</td>
										<td>高峰</td>
										<td>处室一</td>
										<td><em class="yes">已确认</em></td>
									</tr>
									<tr>
										<td>2</td>
										<td>评审二组</td>
										<td>1</td>
										<td>1</td>
										<td>马云</td>
										<td>处室二</td>
										<td><em class="not">未确认</em></td>
									</tr>
								</tbody>
							</table>
						</div>
					</div>
				</div>
				<script src="lib/layui/layui.js" type="text/javascript"></script>
				<script type="text/javascript">
					var Newps;
					var Dellayer;
					var fenzujump;
					var renwujump;
					var Daochu;
					var renwufenzujump;
					//获取后台左侧列表json。这里写死了。
					var json = [{

						"fzrxm": "负责人姓名",
						"id": "0",
						"sbdw": "承担单位",
						"slbh": "YS2018YFB01012",
						"xmmc": "项目名称",
						"znfx": "指南方向1",
					}, {
						"fzrxm": "负责人姓名",
						"id": "1",
						"sbdw": "承担单位",
						"slbh": "YS2018YFB01013",
						"xmmc": "项目名称",
						"znfx": "指南方向1",
					}, {
						"fzrxm": "负责人姓名",
						"id": "2",
						"sbdw": "承担单位",
						"slbh": "YS2018YFB01014",
						"xmmc": "项目名称",
						"znfx": "指南方向1",
					}, {
						"fzrxm": "负责人姓名",
						"id": "3",
						"sbdw": "承担单位",
						"slbh": "YS2018YFB01015",
						"xmmc": "项目名称",
						"znfx": "指南方向1",
					}, {
						"fzrxm": "负责人姓名",
						"id": "4",
						"sbdw": "承担单位",
						"slbh": "YS2018YFB01016",
						"xmmc": "项目名称",
						"znfx": "指南方向1",
					}, {
						"fzrxm": "负责人姓名",
						"id": "5",
						"sbdw": "承担单位",
						"slbh": "YS2018YFB01017",
						"xmmc": "项目名称",
						"znfx": "指南方向1",
					}, {
						"fzrxm": "负责人姓名",
						"id": "6",
						"sbdw": "承担单位",
						"slbh": "YS2018YFB01018",
						"xmmc": "项目名称",
						"znfx": "指南方向1",
					}, {
						"fzrxm": "负责人姓名",
						"id": "7",
						"sbdw": "承担单位",
						"slbh": "YS2018YFB01019",
						"xmmc": "项目名称",
						"znfx": "指南方向1",
					}, {
						"fzrxm": "负责人姓名",
						"id": "8",
						"sbdw": "承担单位",
						"slbh": "YS2018YFB01020",
						"xmmc": "项目名称",
						"znfx": "指南方向1",
					}, {
						"fzrxm": "负责人姓名",
						"id": "9",
						"sbdw": "承担单位",
						"slbh": "YS2018YFB01021",
						"xmmc": "项目名称",
						"znfx": "指南方向1",
					}, {
						"fzrxm": "负责人姓名",
						"id": "10",
						"sbdw": "承担单位",
						"slbh": "YS2018YFB01022",
						"xmmc": "项目名称",
						"znfx": "指南方向1",
					}, {
						"fzrxm": "负责人姓名",
						"id": "11",
						"sbdw": "承担单位",
						"slbh": "YS2018YFB01023",
						"xmmc": "项目名称",
						"znfx": "指南方向1",
					}, {
						"fzrxm": "负责人姓名",
						"id": "12",
						"sbdw": "承担单位",
						"slbh": "YS2018YFB01024",
						"xmmc": "项目名称",
						"znfx": "指南方向1",
					}, {
						"fzrxm": "负责人姓名",
						"id": "13",
						"sbdw": "承担单位",
						"slbh": "YS2018YFB01025",
						"xmmc": "项目名称",
						"znfx": "指南方向1",
					}, {
						"fzrxm": "负责人姓名",
						"id": "14",
						"sbdw": "承担单位",
						"slbh": "YS2018YFB01026",
						"xmmc": "项目名称",
						"znfx": "指南方向1",
					}];
					// 右边列表数据
					var jsonRight = [];
					//定义一个分页获取数据的方法
					function getJsonPage(page, pageSize, json) {
						var arr = [];
						for(var i = page; i < json.length; i++) {
							if(i >= pageSize) {
								return arr;
							} else {
								arr.push(json[i]);
							}
						}
						return arr;
					}
					//渲染左边列表数据的方法
					function writeLeftList(arr) {
						$("#main—box .left .list table tr").not(".header").remove();
						var str = "",
							num = 1;
						for(var i = 0; i < arr.length; i++) {
//							console.log(arr[i])
							str += "<tr id="+arr[i].id+"><td>" + num + "</td><td>" + arr[i].slbh + "</td><td>" + arr[i].xmmc + "</td></tr>";
							num++;
						}
						$("#main—box .left .list table tr.header").after(str);
					}
					//渲染右边列表数据方法 writeRightList
					function writeRightList(arr) {
						$("#main—box .right .list table tr").not(".header").remove();
						var str = "",
							num = 1;
						for(var i = 0; i < arr.length; i++) {
//							console.log(arr[i])
							str += "<tr id="+arr[i].id+"><td>" + num + "</td><td>" + arr[i].znfx + "</td><td>" + arr[i].slbh + "</td><td>" + arr[i].xmmc + "</td><td>" + arr[i].sbdw + "</td><td>"+arr[i].fzrxm+"</td></tr>";
							num++;
						}
						$("#main—box .right .list table tr.header").after(str);
					}
					//排序
					function arrSort(arr) {
						//将数据按项目编号排序
						for(var a = 0; a < arr.length-1; a++) {
							for(var b = 0; b < arr.length - a - 1; b++) {
								if(arr[b].slbh.substr(-5, 5) > arr[b + 1].slbh.substr(-5, 5)) {
									var swap = arr[b];
									arr[b] = arr[b + 1];
									arr[b + 1] = swap;
								}
							}
						}
						return arr;
					}
					//数组里删除指定元素
					function delArr(id,arr){
						for(var i = 0; i < arr.length; i++) {
							if(id == arr[i].id){
								arr.splice(i,1);
							}
						}
					}
					//通过id查询数组里的单条数据
					function getOne(id,arr){
						for(var i = 0; i < arr.length; i++) {
							if(id == arr[i].id){
								return arr[i];
							}
						}
					}
					//数组里添加元素
					function addArr(id,arr,one){
						for(var i = 0; i <= arr.length; i++) {
							if(arr.length == 0){
								arr.push(one);
							}else if(arr.indexOf(one)== -1){
								arr.push(one);
							}
						}
					}
					$(function() {
						//初始化左边表格数据
						var countLeft = Math.ceil(json.length / 10); //获取分页数
						//先排序再写入
						arrSort(json);
						writeLeftList(getJsonPage(0, 10, json)); //初始化第一页的数据
						//初始化右边边表格数据
						var countRight = Math.ceil(jsonRight.length / 10); //获取分页数
						//先排序再写入
						arrSort(jsonRight);
						writeRightList(getJsonPage(0, 10, jsonRight)); //初始化第一页的数据
						//使用分页插件
						layui.use('laypage', function() {
							var laypage = layui.laypage;
							laypage.render({
								elem: 'leftPage',
								count: countLeft * 10,
								layout: ['prev', 'next'],
								jump: function(obj, first) {
									if(!first) {
										layer.msg('第 ' + obj.curr + ' 页');
										writeLeftList(getJsonPage((obj.curr - 1) * 10, obj.curr * 10, json))
									}
								}
							});
							laypage.render({
								elem: 'rightPage',
								count: countRight * 10,
								layout: ['prev', 'next'],
								jump: function(obj, first) {
									if(!first) {
										layer.msg('第 ' + obj.curr + ' 页');
									}
								}
							});
						})
						//列表选中效果
						$("#main—box .list table").on("click","tr",function() {
							if($(this).hasClass("hover")) {
								$(this).removeClass("hover");
							} else {
								$(this).addClass("hover");
							}
						})

						//左侧到右侧
						$("#main—box .middle ul li.lfrt").on("click", function() {
							//获取左侧选中的tr的集合
							var html = $("#main—box .left .list table tr.hover");
							for(var i = 0; i < html.length; i++) {
								//添加右侧数据
								var one =getOne($(html[i]).attr("id"),json);
								console.log($(html[i]).attr("id"));
								console.log(one);
								addArr($(html[i]).attr("id"),jsonRight,one);
								//删除左侧数据
								delArr($(html[i]).attr("id"),json);
								
							}
							//操作完初始左右数据
							var laypage = layui.laypage;
							//先排序再写入
							arrSort(json);
							writeLeftList(getJsonPage(0, 10, json)); 
							countLeft = Math.ceil(json.length / 10);
							laypage.render({
								elem: 'leftPage',
								count: countLeft * 10,
								layout: ['prev', 'next'],
								jump: function(obj, first) {
									if(!first) {
										layer.msg('第 ' + obj.curr + ' 页');
										writeLeftList(getJsonPage((obj.curr - 1) * 10, obj.curr * 10, json))
									}
								}
							});
							//先排序再写入
							arrSort(jsonRight);
							writeRightList(getJsonPage(0, 10, jsonRight)); 
							countRight = Math.ceil(jsonRight.length / 10);
							laypage.render({
								elem: 'rightPage',
								count: countRight * 10,
								layout: ['prev', 'next'],
								jump: function(obj, first) {
									if(!first) {
										layer.msg('第 ' + obj.curr + ' 页');
										writeRightList(getJsonPage((obj.curr - 1) * 10, obj.curr * 10, jsonRight))
									}
								}
							});
						})
						//右侧到左侧
						$("#main—box .middle ul li.rtlf").on("click", function() {
							//获取右侧选中的tr的集合
							var html = $("#main—box .right .list table tr.hover");
							for(var i = 0; i < html.length; i++) {
								//添加左侧数据
								var one =getOne($(html[i]).attr("id"),jsonRight); 
								console.log($(html[i]).attr("id"));
								console.log(one);
								addArr($(html[i]).attr("id"),json,one);
								//删除右侧数据
								delArr($(html[i]).attr("id"),jsonRight);
								console.log(json);
								console.log(jsonRight);
								
							}
							//操作完初始左右数据
							var laypage = layui.laypage;
							//这里要获取所有的数据进行排序之后再按分页去取
							arrSort(json);
							writeLeftList(getJsonPage(0, 10, json)); 
							countLeft = Math.ceil(json.length / 10);
							laypage.render({
								elem: 'leftPage',
								count: countLeft * 10,
								layout: ['prev', 'next'],
								jump: function(obj, first) {
									if(!first) {
										layer.msg('第 ' + obj.curr + ' 页');
										writeLeftList(getJsonPage((obj.curr - 1) * 10, obj.curr * 10, json))
									}
								}
							});
							//这里要获取所有的数据进行排序之后再按分页去取
							arrSort(jsonRight);
							writeRightList(getJsonPage(0, 10, jsonRight)); 
							countRight = Math.ceil(jsonRight.length / 10);
							laypage.render({
								elem: 'rightPage',
								count: countRight * 10,
								layout: ['prev', 'next'],
								jump: function(obj, first) {
									if(!first) {
										layer.msg('第 ' + obj.curr + ' 页');
										writeRightList(getJsonPage((obj.curr - 1) * 10, obj.curr * 10, jsonRight))
									}
								}
							});
						})
						//左侧都右侧 全部
						$("#main—box .middle ul li.lfrtAll").on("click", function() {
							//获取左侧当前页的tr的集合
							var html = $("#main—box .left .list table tr").not(".header");
							console.log(html);
							for(var i = 0; i < html.length; i++) {
								//添加右侧数据
								var one =getOne($(html[i]).attr("id"),json); 
								console.log(one);
								addArr($(html[i]).attr("id"),jsonRight,one);
								//删除左侧数据
								delArr($(html[i]).attr("id"),json);
								
							}
							console.log(json);
							console.log(jsonRight);
							//操作完初始左右数据
							var laypage = layui.laypage;
							//这里要获取所有的数据进行排序之后再按分页去取
							arrSort(json);
							writeLeftList(getJsonPage(0, 10, json)); 
							countLeft = Math.ceil(json.length / 10);
							laypage.render({
								elem: 'leftPage',
								count: countLeft * 10,
								layout: ['prev', 'next'],
								jump: function(obj, first) {
									if(!first) {
										layer.msg('第 ' + obj.curr + ' 页');
										writeLeftList(getJsonPage((obj.curr - 1) * 10, obj.curr * 10, json))
									}
								}
							});
							//这里要获取所有的数据进行排序之后再按分页去取
							arrSort(jsonRight);
							writeRightList(getJsonPage(0, 10, jsonRight)); 
							countRight = Math.ceil(jsonRight.length / 10);
							laypage.render({
								elem: 'rightPage',
								count: countRight * 10,
								layout: ['prev', 'next'],
								jump: function(obj, first) {
									if(!first) {
										layer.msg('第 ' + obj.curr + ' 页');
										writeRightList(getJsonPage((obj.curr - 1) * 10, obj.curr * 10, jsonRight))
									}
								}
							});
						})
						//右侧到左测 全部
						$("#main—box .middle ul li.rtlfAll").on("click", function() {
							//获取右侧选中的tr的集合
							
							var html = $("#main—box .right .list table tr").not(".header");
							console.log(html);
							for(var i = 0; i < html.length; i++) {
								//添加左侧数据
								var one =getOne($(html[i]).attr("id"),jsonRight); 
								console.log(one);
								addArr($(html[i]).attr("id"),json,one);
								//删除右侧数据
								delArr($(html[i]).attr("id"),jsonRight);
								
							}
							console.log(json);
							console.log(jsonRight);
							//操作完初始左右数据
							var laypage = layui.laypage;
							//这里要获取所有的数据进行排序之后再按分页去取
							arrSort(json);
							writeLeftList(getJsonPage(0, 10, json)); 
							countLeft = Math.ceil(json.length / 10);
							laypage.render({
								elem: 'leftPage',
								count: countLeft * 10,
								layout: ['prev', 'next'],
								jump: function(obj, first) {
									if(!first) {
										layer.msg('第 ' + obj.curr + ' 页');
										writeLeftList(getJsonPage((obj.curr - 1) * 10, obj.curr * 10, json))
									}
								}
							});
							//这里要获取所有的数据进行排序之后再按分页去取
							arrSort(jsonRight);
							writeRightList(getJsonPage(0, 10, jsonRight)); 
							countRight = Math.ceil(jsonRight.length / 10);
							laypage.render({
								elem: 'rightPage',
								count: countRight * 10,
								layout: ['prev', 'next'],
								jump: function(obj, first) {
									if(!first) {
										layer.msg('第 ' + obj.curr + ' 页');
										writeRightList(getJsonPage((obj.curr - 1) * 10, obj.curr * 10, jsonRight))
									}
								}
							});
						})
						//升降序样式
						$("#main—box .list table tr th").on("click", "i", function() {
							if($(this).find("img").attr("src") == "static/images/iconJx.png") {
								$(this).find("img").attr("src", "static/images/iconSx.png");
							} else {
								$(this).find("img").attr("src", "static/images/iconJx.png");
							}
						})
						//新建评审弹窗
						$("#addps").on("click", function() {
							Newps = layer.open({
								type: 1,
								title: false,
								closeBtn: 0,
								area: ["600px", "470px"],
								shadeClose: false,
								skin: 'yourclass',
								content: $("#Newps")
							});
						})
						//打开删除评审弹窗
						$("#delps").on("click", function() {
							Dellayer = layer.open({
								type: 1,
								title: false,
								closeBtn: 0,
								area: ["302px", "225px"],
								shadeClose: true,
								skin: 'yourclass',
								content: $("#Dellayer")
							});
						})
						//分组授权弹窗
						$("#addfenzu").on("click", function() {
							fenzujump = layer.open({
								type: 1,
								title: false,
								closeBtn: 0,
								area: ["600px", "370px"],
								shadeClose: true,
								skin: 'yourclass',
								content: $("#fenzujump")
							});
						})
						//任务确认弹窗
						$("#addrenwu").on("click", function() {
							renwujump = layer.open({
								type: 1,
								title: false,
								closeBtn: 0,
								area: ["600px", "380px"],
								shadeClose: true,
								skin: 'yourclass',
								content: $("#renwujump")
							});
						})
						//导出专家名单
						$("#adddaochu").on("click", function() {
							Daochu = layer.open({
								type: 1,
								title: false,
								closeBtn: 0,
								area: ["400px", "252px"],
								shadeClose: true,
								skin: 'yourclass',
								content: $("#Daochu")
							});
						})
						//任务分组弹窗
						$(".projectlist td.link").on("click", function() {
							renwujump = layer.open({
								type: 1,
								title: false,
								closeBtn: 0,
								area: ["600px", "260px"],
								shadeClose: true,
								skin: 'yourclass',
								content: $("#renwufenzujump")
							});
						})
					})
				</script>
				<!-- InstanceEndEditable -->
				<!--下面是模板页内容不可动-->
			</div>
		</div>

		<script type="text/javascript">
			$(function() {
				$(document).bind('click', function() {
					$(".user div").fadeOut(100)
				});
				$(".user").bind('click', function(e) {
					$(".user div").fadeIn(100)
					stopPropagation(e); //调用停止冒泡方法,阻止document方法的执行
				});
				$(".main").height($(window).height() - 60)

				$(".leftMenu div").on("click", function() {
					$(this).addClass("light").siblings().removeClass("light")
				})
			})

			function stopPropagation(e) {
				if(e.stopPropagation)
					e.stopPropagation(); //停止冒泡  非ie
				else
					e.cancelBubble = true; //停止冒泡 ie
			}
		</script>
	</body>
	<!-- InstanceEnd -->

</html>